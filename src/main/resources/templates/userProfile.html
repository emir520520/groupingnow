<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8">
<title th:text="${originalUser.email}"></title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
</head>
<body th:object="${originalUser}">

<nav class="navbar navbar-expand-md navbar-dark bg-primary  navbar-fixed-top">
		<a class="navbar-brand" href="/">Grouping Application</a>
			<div id="navbar" class="collapse navbar-collapse">
				<ul class="navbar-nav">
				<li class="nav-item" sec:authorize="isAuthenticated()"><a class="nav-link" th:href="@{/userProfile}">User Profile</a></li>
					<li class="nav-item" sec:authorize="isAuthenticated()"><a class="nav-link" th:href="@{/logout}">Logout</a></li>	
				</ul>
			</div>
			<form class="form-inline">
				<input class="form-control mr-sm-2" type="text" placeholder="Search">
      				<button class="btn btn-success my-2 my-sm-0" type="button">Search</button>
			</form>
	
	</nav>

	<section style="background-color: #eee;">
		<div class="container py-5">

			<div class="row">
				<div class="col-lg-4">
					<div class="card mb-10">
						<div class="card-body text-center">
							<img th:src="'data:image/jpeg;base64,'+${originalUser.getBase64Encoded()}" alt="profilePicture"
								 class="rounded-circle img-fluid" style="width: 150px;">
							<h5 class="my-3" th:text="${originalUser.firstName}+' '+${originalUser.lastName}">User Name</h5>
							<div class="d-flex justify-content-center mb-2">
								<a th:href="@{/userProfileEdit}" type="button" class="btn btn-primary">Edit</a>
							</div>
						</div>
					</div>
				</div>

				<div class="col-lg-8">
					<div class="card mb-4">
						<div class="card-body">
							<div class="row">
								<div class="col-sm-3">
									<p class="mb-0">Full Name</p>
								</div>
								<div class="col-sm-9">
									<p class="text-muted mb-0" th:text="${originalUser.firstName}+' '+${originalUser.lastName}">Full Name</p>
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-sm-3">
									<p class="mb-0">Email</p>
								</div>
								<div class="col-sm-9">
									<p class="text-muted mb-0" th:text="${originalUser.email}">Email</p>
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-sm-3">
									<p class="mb-0">Campus</p>
								</div>
								<div class="col-sm-9">
									<p class="text-muted mb-0" th:text="${originalUser.campus}">Campus</p>
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-sm-3">
									<p class="mb-0">Program</p>
								</div>
								<div class="col-sm-9">
									<p class="text-muted mb-0" th:text="${originalUser.program}">Program</p>
								</div>
							</div>
							<hr>
							<div class="row">
								<div class="col-sm-3">
									<p class="mb-0">Interested Topics</p>
								</div>
								<div class="col-sm-9">
									<p class="text-muted mb-0"><span th:each="topic: ${originalUser.topics}"  th:text="${originalUser.campus}">Topics</span></p>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	</section>
	<div class="container">
		<a th:href="@{/sendemail/}" class="btn btn-info col-4">Send Email</a>
	</div>


	<div class="list-group m-5">
		<div>
			<h2>Your Event List</h2>
		</div>
		<div class="container">
			<span sec:authentication="principal.username"> User</span>
			<span> [[${#request.userPrincipal.principal.username}]]</span>
		</div>

		<div class="list-group m-5">
			<h2>Events</h2>
			<div class="card list-group-item d-flex flex-row" th:each="item, status: ${cartEvents}">
				<div class="card-body" th:with="event = ${item.event}">

					<h5 class="card-title" th:text="'Event Name:' +${event.eventName}"></h5>
					<p class="card-text" th:text="${event.Description}"></p>
				</div>
			</div>
		</div>

	</div>
</body>
</html>